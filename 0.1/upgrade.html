<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>Nmag Upgrade Instructions</title>
    <link rel="stylesheet" href="../css/navigation_02_2008.css" type="text/css" />

<link rel="stylesheet" href="../css/body_02_2008.css" type="text/css" />

</head>

<body>

<div id="wrap"> 
<img src="../images/nmaglogo2.png" alt="University of Southampton, nmag, Computational Micromagnetism,  logo"  hspace="0" vspace="1" valign="top">

</div>

<div id="wrap"> 


<table>
  <tr>
    <td valign="top" align="left" width="25%">
      <!--<img src="../images/IronPalladium.png" width="137" height="134" alt="logo" vspace="1" hspace="2" >-->

    <div id="left-column">
    <div id="sidie">
      <ul>
	<li class="left-navheader-first">
	<a href="index.html" class="left-navheader">nmag 0.1
</a>
	</li> 
        <li class="left-navheader">Pages</li>

<li><a href="manual/html/manual.html">manual (html)</a></li>
<li><a href="install/index.html">installation</a></li>
<li><a href="manual/manual.pdf">manual (pdf)</a></li>



	</ul>
      </div>
      </div>
    </td>
    <!-- main content cell first, with rowspan=2 -->
    <td valign="top" rowspan="2">


<div id="header-section">
  <div id="header">
  <ul>
    <li><a href="../index.html">Nmag home</a></li>
<li>|</li>
<li><a href="index.html">nmag 0.1</a></li>
<li>|</li>
<li>upgrade</li>

  </ul>
</div>
</div>

    <div id="middle-column">
      <a name="startcontent" id="startcontent"></a>
    <div id="gallery">
      <div class="document" id="how-to-upgrade-nmag">
<h1 class="title">How to upgrade Nmag</h1>
<div class="contents topic" id="overview">
<p class="topic-title">Overview</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="toc-entry-1">Introduction</a></li>
<li><a class="reference internal" href="#method-a-compile-everything-from-source" id="toc-entry-2">Method A: compile everything from source</a></li>
<li><a class="reference internal" href="#method-b-debian-package" id="toc-entry-3">Method B: Debian package</a></li>
<li><a class="reference internal" href="#method-c-knoppix-cd" id="toc-entry-4">Method C: Knoppix CD</a></li>
<li><a class="reference internal" href="#method-d-nmag-virtual-machine" id="toc-entry-5">Method D: Nmag Virtual Machine</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#toc-entry-1">Introduction</a></h1>
<p>How to upgrade Nmag depends on the way it which it has been installed.</p>
</div>
<div class="section" id="method-a-compile-everything-from-source">
<h1><a class="toc-backref" href="#toc-entry-2">Method A: compile everything from source</a></h1>
<p>If you have compiled Nmag <a class="reference external" href="install/install_a.html">from source</a>, you have two options:</p>
<ul>
<li><p class="first">optionally move the old installation directory (<tt class="docutils literal"><span class="pre">nmag-0.1</span></tt>) to a
different location (or, if you feel brave, delete it), then
download the whole tar-file (nmag-0.1.tar.gz), and repeat the
installation. This is the safe way, but it will take the same time
to compile as the initial install, as all supporting libraries
will be re-compiled.</p>
</li>
<li><p class="first">Alternatively, <tt class="docutils literal">cd</tt> into the <tt class="docutils literal"><span class="pre">nmag-0.1</span></tt> directory, i.e.:</p>
<pre class="literal-block">
$&gt; cd nmag-0.1
</pre>
<p>and run the <tt class="docutils literal">make update</tt> command, i.e.:</p>
<pre class="literal-block">
$nmag-0.1&gt; make update
</pre>
<p>This will download just the Nmag-specific code (that is
everything in the subdirectory <tt class="docutils literal"><span class="pre">nmag-0.1/nsim</span></tt>). A subsequent
call of <tt class="docutils literal">make</tt> will compile the new downloaded version:</p>
<pre class="literal-block">
$nmag-0.1&gt; make
</pre>
<p>This way of upgrading is expected to (usually) work, but is
somewhat experimental. If this doesn't work for you, please let
us know.</p>
<p>In particular, this may fail if any changes to the supporting
libraries have taken place, but we will try to include this
information in any upgrade announcements.</p>
</li>
</ul>
<p>To check whether the upgrade has been successful, do two things:</p>
<ol class="arabic">
<li><p class="first">go to the <tt class="docutils literal"><span class="pre">nmag-0.1</span></tt> directory, and run <tt class="docutils literal">bin/nsimversion</tt>, i.e.:</p>
<pre class="literal-block">
$&gt; cd nmag-0.1
$nmag-0.1&gt; bin/nsimversion
</pre>
<p>This should produce output like this:</p>
<pre class="literal-block">
Versions:
  nsim.svnversion        =5962
  nmag-release           =0.1
  nmag-distribution-mode =tarball
Paths:
  nsimpath       : /Users/fangohr/local/nmag-0.1/nsim/interface/nsim
  nmagpath       : /Users/fangohr/local/nmag-0.1/nsim/interface/nsim/../nmag
  nmagpath (real): /Users/fangohr/local/nmag-0.1/nsim/interface/nmag
</pre>
<p>where the version number (here 5962) can be found at the top.</p>
<p>This should display the version number of the most recent
version on <a class="reference external" href="http://nmag.soton.ac.uk">http://nmag.soton.ac.uk</a>.</p>
</li>
<li><p class="first">go to the <tt class="docutils literal"><span class="pre">nmag-0.1</span></tt> directory, and run <tt class="docutils literal">make check</tt>, i.e.:</p>
<pre class="literal-block">
$&gt; cd nmag-0.1
$nmag-0.1&gt; make check
</pre>
<p>This will run a small number of selected (fast) regression
tests. If these pass, chances are that the upgrade has been
successful.</p>
<p>The output should end similar to this:</p>
<pre class="literal-block">
&lt;...&gt;
interface/nmag/manual/example1/test_sphere1.py[4] ....
interface/nmag/tests/test_trial.py[2] ..
interface/nsim/test_reporttools.py[3] ...
interface/nsim/test_sets.py[13] .............
interface/nsim/test_when.py[5] .....
interface/nsim/si_units/test_lib.py[1] .
tests/regression/nmag/bigbar/nmag4/test_slow_bigbar.py[2] ss
tests/regression/nmesh/import/gmsh1_0/test_gmsh1_0_import.py[2] ..
../../../../unit/nmeshmirror/test_nmeshmirror.py[1] .
../../../../unit/pycaml/test_refcount.py[1] .

__________________________ reasons for skipped tests ___________________________
reason: Skipped: &quot;test not selected by keyword '-test_slow'&quot;

============= tests finished: 32 passed, 4 skipped in 9.88 seconds =============
</pre>
<p>The important information is that 32 tests have passed (the actual
number may differ).</p>
<p>Skipped tests are okay (these are the slow ones that are excluded
for this quick check).</p>
<p>If tests are reported as <em>failed</em>, then something may have gone wrong.</p>
</li>
</ol>
</div>
<div class="section" id="method-b-debian-package">
<h1><a class="toc-backref" href="#toc-entry-3">Method B: Debian package</a></h1>
<p>If you are running Debian (or a derived distribution such as Ubuntu or
Knoppix), you shoud be able to upgrade the <tt class="docutils literal">nsim</tt> package:</p>
<ul>
<li><p class="first">Make sure the nmag-debian repository is in your
<tt class="docutils literal">/etc/apt/sources.list</tt> file (see <a class="reference external" href="install/debian.html#recommended-procedure">recommended procedure</a>).</p>
</li>
<li><p class="first">become the super user (=root), i.e.:</p>
<pre class="literal-block">
$&gt; su -
</pre>
</li>
<li><p class="first">Update the database of software that is available to install by running:</p>
<pre class="literal-block">
$&gt; aptitude update
</pre>
</li>
<li><p class="first">Update the nsim package (which provides nmag) by running:</p>
<pre class="literal-block">
$&gt; aptitude install nsim
</pre>
</li>
</ul>
<p>This completes the upgrade procedure. To check whether the upgrade has been successful, do two things:</p>
<ol class="arabic simple">
<li>You can check which version is installed by running the <tt class="docutils literal">nsimversion</tt> command.</li>
<li>You can run a few regression tests by calling <tt class="docutils literal">nmagcheck.sh</tt>.</li>
</ol>
</div>
<div class="section" id="method-c-knoppix-cd">
<h1><a class="toc-backref" href="#toc-entry-4">Method C: Knoppix CD</a></h1>
<p>The Knoppix distribution is Debian based, so you can follow the
instructions for <a class="reference internal" href="#method-b-debian-package">Method B: Debian package</a> to upgrade the Knoppix
system you have already. Or download an updated iso image.</p>
</div>
<div class="section" id="method-d-nmag-virtual-machine">
<h1><a class="toc-backref" href="#toc-entry-5">Method D: Nmag Virtual Machine</a></h1>
<p>The Virtual machine operating system is also a Debian Linux
installation, so you can follow the instructions for <a class="reference internal" href="#method-b-debian-package">Method B: Debian
package</a>. Note that the default password for root is <tt class="docutils literal">nmag</tt> if you
have not changed this after downloading the virtual machine.</p>
<p>You can, of course, also download the updated virtual machine from
nmag.soton.ac.uk, but (i) you download a lot of bytes that haven't
changed and (ii) you may have modified the virtual machine, or saved
your own data etc. For these reasons, you may prefer to upgrade the
Nmag software on the virtual machine you have already.</p>
</div>
</div>

    </div>

    <div id="end">
      <!--<p><a href="#startcontent"><small>Return to Top</small></a><br />
      </p>-->
    </div>


    
    </div></td>
  </tr>
  </table>


<div id="footer">

  <!--
  Copyright &copy; Voidspace<br />Design by <a href="http://www.fuchsiashockz.co.uk">Fuchsiashockz</a> | <a href="http://validator.w3.org/check?uri=referer" title="Validate code as W3C XHTML 1.1 Strict Compliant">W3C XHTML 1.1</a> | <a href="http://jigsaw.w3.org/css-validator/check?uri=referer" title="Validate Style Sheet as W3C CSS 2.0 Compliant">W3C CSS 2.0</a>
  -->
      <small>Page last modified <strong>Thu Aug 14 08:48:58 2025</strong>.</small> 
|  Created with <a href="../rest2web.html">rest2web</a>, and <a href="../computing/rstwebpage.html">reStructuredText</a> docutils.

</div>

</div>
</body>
</html>
